---
layout: post
title: '电子电路开发之殇'
date: 2016-06-18
author: huang
cover: 'http://on2171g4d.bkt.clouddn.com/jekyll-banner.png'
tags: 电子电路
---

## 熟悉基本电路图
三极管驱动，上拉电阻，去耦电容等等基本的元电路图应该知道，并且知道单片机的IO口无法做功率驱动。

## 电焊手工能力
一般都是焊接2.x mm的间距，抽风买了1.x mm的，没这个手艺去焊接，来一块毁一块。

## 单片机接口协议
GPIO是最基本的，但是还需要了解IIC,UART,SPI,PWM，ADC等等电路接口协议。如果单片机没有包含相关协议的硬件实现，还要能用GPIO实现，或者买相关的协议硬件模块。

## 模块手册
光有单片机也就能玩玩灯，真要做点有用途的事情，其他模块是不能省的，比如温度、湿度、RF和电机等等。单片机和其他模块命令和数据通信，是基于上节所说的接口协议进行。

每个模块有自己的特性和命令，还有自己的模式，操作起来就要找手册读一读。

通信方法一般是命令字 + 设置值，目前硬件方面的操控还是通过读写寄存器进行的，属于逻辑电路范畴。

## 开发调试
好了，现在基本的知识都有了，画画电路草图，买些面包线和面包板，连接单片机、模块和相关元件。然后在不怎么样的IDE上写程序，烧录到IC，运行。

呵呵，板子怎么不按套路出牌。这时候有几种可能：

1. 代码问题，可能协议信号不太对啊。怎么办，可能要来个逻辑分析仪。
1. 模块问题，可能被静电烧了。怎么办？可能得多买几个换着测吧。如果是RF的模块，估计还要抓信号来看吧。
1. 代码运行过程怎么查？打日志呗，通过串口看，另外别买裸板，买开发板带一堆灯和LCD也能展示个过程。

## PCB产品
终于电路也通了，程序也通了，想产品化做小点。如果少量的话可能手工做更便宜点，买来洞洞板和原件，然后焊锡一个个焊好。

如果想再小点，就要设计PCB了，这个我还没学，因为已经对整个流程很烦躁了。设计好了PCB，淘宝找商家打板就好了。

## 你感兴趣你搞定了，成本高，能做什么呢？
你有想法，要做点实用的东西，而不仅仅是点个灯测个PM2.5m，比如像我那样打算做个水阀控制，屋顶的水位电路好做，怎么开关电机呢？买个wifi插座也能应付过去，wifi插座的怎么获得信号呢？还有水阀的开关电子阀门，拆装也是有工程量的。

算一算下来，真实施一套完善的系统，硬件成本就是许多，虽然STC、STM便宜，但是具备基本通信功能的NodeMCU售价20￥。另外设计上还要考虑停电、停网等预案。玩具是没有意义的，但是做得完善又各种成本太高。

也就是工厂搞无人车间，电气自动化，做单片机有价值，还有所谓的无线通信领域，这也是偏硬多一些。

至于现在的家庭智能硬件，只会搞搞万能遥控器，wifi开关。真正的家庭智能电器环境，应该是有大主机检测各个传感器状态，并根据客户的作息习惯，自动进行舒适、安全等方面的控制。现在这种什么硬件都wifi到云，通过手机操作和简单定时的方式真是太玩具了。并且各家都极其封闭，根本没有API方便第三方进行大主机的开发。

